\RequirePackage{ifthen}
\RequirePackage{textcomp} % Required by upquote option.
\RequirePackage{latexscholar-float} % Required by \floatmargin
\RequirePackage{latexscholar-i18n}
\RequirePackage{listings}


% Default settings for listings
\lstset{upquote=false}
\lstset{basicstyle=\scriptsize}
\lstset{tabsize=4}
\lstset{frame=single}
\lstset{frameround=tttt}
\lstset{aboveskip=16pt}
\lstset{belowskip=6pt}
\lstset{xleftmargin=\floatmargin}
\lstset{xrightmargin=\floatmargin}
\lstset{resetmargins=true}
\lstset{float}
\lstset{captionpos=b}
\lstset{showstringspaces=false}

\@ifpackageloaded{inputenc}{}{
	% http://stackoverflow.com/questions/1116266/listings-in-latex-with-utf-8-or-at-least-german-umlauts
	\ifthenelse{\boolean{scholars@encoding@utf8}}{
		\usepackage{listingsutf8}
%		\lstset{extendedchars=false}
		\lstset{inputencoding=utf8}
		\lstset{literate=%
			{"}{{\textquotedbl}}1
	 		{é}{{\'{e}}}1
	 		{è}{{\`{e}}}1
	 		{ê}{{\^{e}}}1
	 		{ë}{{\¨{e}}}1
	 		{É}{{\'{E}}}1
	 		{Ê}{{\^{E}}}1
	 		{û}{{\^{u}}}1
	 		{ù}{{\`{u}}}1
	 		{â}{{\^{a}}}1
	 		{à}{{\`{a}}}1
	 		{á}{{\'{a}}}1
	 		{ã}{{\~{a}}}1
	 		{Á}{{\'{A}}}1
	 		{Â}{{\^{A}}}1
	 		{Ã}{{\~{A}}}1
	 		{ç}{{\c{c}}}1
	 		{Ç}{{\c{C}}}1
	 		{õ}{{\~{o}}}1
	 		{ó}{{\'{o}}}1
	 		{ô}{{\^{o}}}1
	 		{Õ}{{\~{O}}}1
	 		{Ó}{{\'{O}}}1
	 		{Ô}{{\^{O}}}1
	 		{î}{{\^{i}}}1
	 		{Î}{{\^{I}}}1
	 		{í}{{\'{i}}}1
	 		{Í}{{\~{Í}}}1
	 	}
	}{}
        \ifthenelse{\boolean{scholars@encoding@iso88591}}{
		\lstset{extendedchars=true}
        }{}
}

% Define some syntax highlight rules for HyperTalk.
\lstdefinelanguage{hypertalk}{
	morekeywords={goto},
	sensitive=false,
	morecomment=[l]{//},
	morecomment=[s]{/*}{*/},
	morestring=[b]",
}

% Define syntax highlight rules for a patch file/diff
\lstdefinelanguage{diff}{
    morekeywords={+, -},
    sensitive=false,
    morecomment=[l]{//},
    morecomment=[s]{/*}{*/},
    morecomment=[l]{+},
    morecomment=[l]{-},
    morestring=[b]",
}


% -*- latex -*-
% Definition of the Lua language for the listings package
% Time-stamp: <2008-11-30 15:27:16 rsmith>
% Written by Roland Smith <rsmith@xs4all.nl> and hereby placed in the public
% domain.
%
\lstdefinelanguage{lua}{
	morekeywords={and,break,do,else,elseif,end,false,for,function,if,in,local,nil,not,or,repeat,return,then,true,until,while},
	morekeywords={[2]arg,assert,collectgarbage,dofile,error,_G,getfenv,getmetatable,ipairs,load,loadfile,loadstring,next,pairs,pcall,print,rawequal,rawget,rawset,select,setfenv,setmetatable,tonumber,tostring,type,unpack,_VERSION,xpcall},
	morekeywords={[2]coroutine.create,coroutine.resume,coroutine.running,coroutine.status,coroutine.wrap,coroutine.yield},
	morekeywords={[2]module,require,package.cpath,package.load,package.loaded,package.loaders,package.loadlib,package.path,package.preload,package.seeall},
	morekeywords={[2]string.byte,string.char,string.dump,string.find,string.format,string.gmatch,string.gsub,string.len,string.lower,string.match,string.rep,string.reverse,string.sub,string.upper},
	morekeywords={[2]table.concat,table.insert,table.maxn,table.remove,table.sort},
	morekeywords={[2]math.abs,math.acos,math.asin,math.atan,math.atan2, math.ceil,math.cos,math.cosh,math.deg,math.exp,math.floor,math.fmod,math.frexp,math.huge,math.ldexp,math.log,math.log10,math.max,math.min, math.modf,math.pi,math.pow,math.rad,math.random,math.randomseed,math.sin, math.sinh,math.sqrt,math.tan,math.tanh},
	morekeywords={[2]io.close,io.flush,io.input,io.lines,io.open,io.output,io.popen,io.read,io.tmpfile,io.type,io.write,file:close,file:flush,file:lines,file:read,file:seek,file:setvbuf,file:write},
	morekeywords={[2]os.clock,os.date,os.difftime,os.execute,os.exit,os.getenv,os.remove,os.rename,os.setlocale,os.time,os.tmpname},
	sensitive=true,
	morecomment=[l]{--},
	morecomment=[s]{--[[}{]]--},
	morestring=[b]",
	morestring=[d]'
}



% Macro for inline source code
%
\@ifpackageloaded{url}{
}{
	\RequirePackage[obeyspaces,spaces]{url}
}
\newcommand\srccode[1]{\url{#1}}%
